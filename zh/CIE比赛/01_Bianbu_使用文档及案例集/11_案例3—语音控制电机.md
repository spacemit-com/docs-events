sidebar_position: 11

# 环境安装

## 下载代码

下载源码压缩包：[voice-control-servo.zip](code/ai_demo/voice-control-servo.zip)

解压命令：

```bash
unzip voice-control-servo.zip -d ~/
```

## 安装系统依赖

```
sudo apt update
sudo apt install -y libopenblas-dev \
						portaudio19-dev \
						python3-dev \
						python3-venv \
						ffmpeg \
						python3-spacemit-ort \
						libcjson-dev \
						libasound2-dev \
						liblgpio1 \
						liblgpio-dev
```

## 安装Python依赖

（1）创建Python虚拟环境

```
python3 -m venv ~/asr_env
```

（2）配置 pip 源为进迭时空镜像源

```
pip config set global.index-url https://pypi.tuna.tsinghua.edu.cn/simple
pip config set global.extra-index-url
https://git.spacemit.com/api/v4/projects/33/packages/pypi/simple
```

（3）安装项目依赖

```
cd ~/voice-control-servo/spacemit_audio
source ~/asr_env/bin/activate
pip install -r requirements.txt
```

## 设置音频设备权限

将当前用户添加到系统音频组，使得用户可以访问音频设备：

```
sudo usermod -aG audio $USER
```

## 设置舵机权限

```bash
sudo chmod a+rw /dev/gpiochip0
```



# 程序启动

- 进入项目目录并激活虚拟环境

```
cd ~/voice-control-servo
source ~/asr_env/bin/activate
```

- 启动程序：

```
python voice_control.py
```

程序启动后，等待提示语音输入，用户可通过“向左转”或者“向右转”等指令控制舵机转动。
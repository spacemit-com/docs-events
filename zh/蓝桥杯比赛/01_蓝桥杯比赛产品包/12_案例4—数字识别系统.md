# 环境安装

## 下载代码

下载源码压缩包：[digit_demo.zip](code/ai_demo/digit_demo.zip)

> digit_demo.zip 仅支持识别数字和字母，若需识别文字，使用 [ocr_demo.zip](code/ai_demo/digit_demo.zip)。

解压命令：

```bash
unzip digit_demo.zip -d ~/
```

## 安装系统依赖

```
sudo apt update
sudo apt install python3-virtualenv
```

## 安装Python依赖

（1）创建Python虚拟环境

```
python3 -m venv ~/ocr-venv
```

（2）配置 pip 源为进迭时空镜像源

```
pip config set global.index-url https://pypi.tuna.tsinghua.edu.cn/simple
pip config set global.extra-index-url
https://git.spacemit.com/api/v4/projects/33/packages/pypi/simple
```

（3）安装项目依赖

```
cd ~/digit_demo
source ~/ocr-venv/bin/activate
pip install -r requirements.txt
```

# 程序启动

- 进入项目目录并激活虚拟环境

```
cd ~/digit_demo
source ~/ocr-venv/bin/activate
```

## OCR识别

- OCR识别：调用检测+识别模型进行推理，仅识别数字和英文

```shell
python ocr_demo.py --mode camera #启用摄像头推理
python ocr_demo.py --mode image --image_path(默认为spacemit_orc/data/train_img_33.jpg)
```

- OCR识别：仅调用识别模型进行推理，仅识别数字和英文,识别速度更快

```shell
python test_recognize.py --use_camera #启用摄像头推理
```

## 数码管显示

```shell
python digitial_serial.py
```

## OCR识别并驱动数码管显示

```shell
python recognize_and_dispaly.py --use_camera # 摄像头识别
```
